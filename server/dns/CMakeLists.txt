sm_lib(libdns membuf.c dns.c parse.c write.c rrl.c DEPS url duv kvpsync)
sm_exe(dns main.c DEPS libdns)

if("${CMAKE_C_COMPILER_ID}" STREQUAL "GNU")
    source_compile_options(parse.c "-Wno-conversion")
    source_compile_options(write.c "-Wno-conversion")
elseif("${CMAKE_C_COMPILER_ID}" MATCHES "Clang")
elseif("${CMAKE_C_COMPILER_ID}" STREQUAL "MSVC")
endif()

sm_test(test_parse.c DEPS libdns)
sm_test(test_write.c DEPS libdns)
sm_test(test_dns.c DEPS libdns)
sm_test(test_rrl.c DEPS libdns)
sm_test(test_main.c DEPS libdns)
